<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sueño | Health Track</title>
    <meta name="description" content="Monitorea y mejora tu calidad de sueño con análisis detallados y recomendaciones personalizadas">
    <meta name="theme-color" content="#00D4AA">

    <!-- Fuentes e iconos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="dashboard-styles.css">

</head>
<body>
    <header>
        <div class="container header-grid">
            <div class="brand">
                <a href="#" aria-label="Health Track">
                    <div class="logo"><i class="fas fa-heartbeat"></i></div>
                    <div>
                        <strong>Health Track</strong>
                        <div style="font-weight:500;font-size:0.75rem;opacity:0.95">Panel de Usuario</div>
                    </div>
                </a>
            </div>

            <div class="user-area">
                <div class="user-info">
                    <div class="user-name" id="userName">María González</div>
                    <div class="user-email" id="headerEmail">maria.gonzalez@email.com</div>
                </div>
                <button type="button" class="btn btn-ghost" id="btnLogout">
                    <i class="fas fa-sign-out-alt"></i> Salir
                </button>
            </div>
        </div>
    </header>

    <nav aria-label="Navegación principal">
        <div class="nav-container">
            <ul class="nav-list">
                <li><a href="dashboard.html"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="estadisticas.html"><i class="fas fa-chart-line"></i> Estadísticas</a></li>
                <li><a href="nutricion.html"><i class="fas fa-utensils"></i> Nutrición</a></li>
                <li><a href="actividad.html"><i class="fas fa-running"></i> Actividad</a></li>
                <li><a href="sueno.html" class="active"><i class="fas fa-bed"></i> Sueño</a></li>
                <li><a href="recordatorio.html"><i class="fas fa-bell"></i> Recordatorios</a></li>
                <li><a href="miperfil.html"><i class="fas fa-user"></i> Mi Perfil</a></li>
            </ul>
            <div class="nav-search">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Buscar..." aria-label="Buscar en Health Track">
            </div>
        </div>
    </nav>

    <!-- CONTENIDO PRINCIPAL -->
    <main>
        <div class="container">
            <div class="page-title">
                <div>
                    <h1>Calidad del Sueño</h1>
                    <p class="lead">Monitorea tus patrones de sueño y mejora tu descanso nocturno</p>
                </div>
                <button type="button" class="btn" id="btnSync" style="background:var(--bg);color:var(--text);border:1px solid var(--border);">
                    <i class="fas fa-sync-alt"></i> Sincronizar
                </button>
            </div>

            <!-- PESTAÑAS COMPLETAS -->
            <div class="tabs-container">
                <button type="button" class="tab-btn active" data-tab="overview">
                    <i class="fas fa-chart-pie"></i> Resumen
                </button>
                <button type="button" class="tab-btn" data-tab="analysis">
                    <i class="fas fa-chart-line"></i> Análisis
                </button>
                <button type="button" class="tab-btn" data-tab="history">
                    <i class="fas fa-history"></i> Historial
                </button>
                <button type="button" class="tab-btn" data-tab="goals">
                    <i class="fas fa-bullseye"></i> Objetivos
                </button>
                <button type="button" class="tab-btn" data-tab="tips">
                    <i class="fas fa-lightbulb"></i> Consejos
                </button>
            </div>

            <!-- PESTAÑA RESUMEN -->
            <div class="tab-content active" id="overview-tab">
                <div class="overview-grid">
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-moon" style="color: #6C63FF;"></i>
                        </div>
                        <div class="overview-number">7h 30m</div>
                        <div class="overview-label">Sueño Promedio</div>
                    </div>
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-star" style="color: #FF6B95;"></i>
                        </div>
                        <div class="overview-number">85%</div>
                        <div class="overview-label">Calidad del Sueño</div>
                    </div>
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-bed" style="color: #00D4AA;"></i>
                        </div>
                        <div class="overview-number">11:30 PM</div>
                        <div class="overview-label">Hora Promedio de Dormir</div>
                    </div>
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-sun" style="color: #667eea;"></i>
                        </div>
                        <div class="overview-number">7:00 AM</div>
                        <div class="overview-label">Hora Promedio de Despertar</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Patrones de Sueño Semanal</h3>
                        <div class="chart-actions">
                            <button class="chart-action active">7 días</button>
                            <button class="chart-action">30 días</button>
                            <button class="chart-action">3 meses</button>
                        </div>
                    </div>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-bar" style="margin-right: 10px;"></i>
                        Gráfico de patrones de sueño semanal
                    </div>
                </div>

                <div class="quality-grid">
                    <div class="quality-item">
                        <div class="quality-value">92%</div>
                        <div class="quality-label">Eficiencia del Sueño</div>
                    </div>
                    <div class="quality-item">
                        <div class="quality-value">15 min</div>
                        <div class="quality-label">Tiempo para Dormirse</div>
                    </div>
                    <div class="quality-item">
                        <div class="quality-value">2</div>
                        <div class="quality-label">Despertares Nocturnos</div>
                    </div>
                    <div class="quality-item">
                        <div class="quality-value">1h 45m</div>
                        <div class="quality-label">Sueño Profundo</div>
                    </div>
                </div>
            </div>

            <!-- PESTAÑA ANÁLISIS -->
            <div class="tab-content" id="analysis-tab">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Análisis Detallado del Sueño</h3>
                        <div class="chart-actions">
                            <button class="chart-action active">Etapas</button>
                            <button class="chart-action">Ritmo Circadiano</button>
                            <button class="chart-action">Comparativa</button>
                        </div>
                    </div>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-pie" style="margin-right: 10px;"></i>
                        Gráfico de análisis detallado del sueño
                    </div>
                </div>

                <div class="sleep-history">
                    <h3 style="margin-bottom: 25px; color: var(--text);">Factores que Afectan tu Sueño</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="caffeine">Consumo de Cafeína</label>
                            <input type="range" id="caffeine" class="form-input" min="0" max="10" value="3">
                        </div>
                        <div class="form-group">
                            <label for="exercise">Ejercicio Diario</label>
                            <input type="range" id="exercise" class="form-input" min="0" max="10" value="7">
                        </div>
                        <div class="form-group">
                            <label for="stress">Nivel de Estrés</label>
                            <input type="range" id="stress" class="form-input" min="0" max="10" value="5">
                        </div>
                        <div class="form-group">
                            <label for="screenTime">Tiempo de Pantalla</label>
                            <input type="range" id="screenTime" class="form-input" min="0" max="10" value="6">
                        </div>
                    </div>
                    <button class="btn-save" id="saveFactors">
                        <i class="fas fa-save"></i> Guardar Análisis
                    </button>
                </div>
            </div>

            <!-- PESTAÑA HISTORIAL -->
            <div class="tab-content" id="history-tab">
                <div class="sleep-history">
                    <div class="history-header">
                        <h3 class="history-title">Historial de Sueño</h3>
                        <div class="chart-actions">
                            <button class="chart-action active">7 días</button>
                            <button class="chart-action">30 días</button>
                            <button class="chart-action">3 meses</button>
                        </div>
                    </div>
                    <div class="sleep-days">
                        <div class="sleep-day">
                            <div class="day-info">
                                <h4>Hoy</h4>
                                <p>11:45 PM - 7:15 AM</p>
                            </div>
                            <div class="sleep-duration">7h 30m</div>
                        </div>
                        <div class="sleep-day">
                            <div class="day-info">
                                <h4>Ayer</h4>
                                <p>11:30 PM - 7:00 AM</p>
                            </div>
                            <div class="sleep-duration">7h 30m</div>
                        </div>
                        <div class="sleep-day">
                            <div class="day-info">
                                <h4>Martes</h4>
                                <p>12:00 AM - 6:45 AM</p>
                            </div>
                            <div class="sleep-duration">6h 45m</div>
                        </div>
                        <div class="sleep-day">
                            <div class="day-info">
                                <h4>Lunes</h4>
                                <p>11:15 PM - 7:30 AM</p>
                            </div>
                            <div class="sleep-duration">8h 15m</div>
                        </div>
                        <div class="sleep-day">
                            <div class="day-info">
                                <h4>Domingo</h4>
                                <p>12:30 AM - 8:00 AM</p>
                            </div>
                            <div class="sleep-duration">7h 30m</div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Registro Manual de Sueño</h3>
                    </div>
                    <form id="sleepForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="sleepDate">Fecha</label>
                                <input type="date" id="sleepDate" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="sleepTime">Hora de Dormir</label>
                                <input type="time" id="sleepTime" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="wakeTime">Hora de Despertar</label>
                                <input type="time" id="wakeTime" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="sleepQuality">Calidad (1-10)</label>
                                <input type="number" id="sleepQuality" class="form-input" min="1" max="10" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="sleepNotes">Notas Adicionales</label>
                            <textarea id="sleepNotes" class="form-input" placeholder="¿Algo que afectó tu sueño? ¿Sueños? ¿Despertares?"></textarea>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Guardar Registro
                        </button>
                    </form>
                </div>
            </div>

            <!-- PESTAÑA OBJETIVOS -->
            <div class="tab-content" id="goals-tab">
                <div class="goals-container">
                    <h3 style="margin-bottom: 25px; color: var(--text);">Mis Objetivos de Sueño</h3>

                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Meta: 8 horas por noche</span>
                            <span>Promedio: 7h 30m</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 85%"></div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Meta: 90% de calidad</span>
                            <span>Actual: 85%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 85%"></div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Meta: Dormir antes de las 11 PM</span>
                            <span>Actual: 11:30 PM</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 30px;">
                        <label for="sleepGoal">Nueva Meta de Sueño (horas)</label>
                        <input type="number" id="sleepGoal" class="form-input" value="8" step="0.5">
                    </div>

                    <button class="btn-save" id="saveSleepGoal">
                        <i class="fas fa-save"></i> Actualizar Meta
                    </button>
                </div>

                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">Progreso Semanal</h3>
                    </div>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-line" style="margin-right: 10px;"></i>
                        Gráfico de progreso semanal hacia objetivos
                    </div>
                </div>
            </div>

            <!-- PESTAÑA CONSEJOS -->
            <div class="tab-content" id="tips-tab">
                <div class="sleep-history">
                    <h3 style="margin-bottom: 25px; color: var(--text);">Consejos para Mejorar el Sueño</h3>
                    <div class="tips-grid">
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="tip-title">Rutina Consistente</div>
                            <div class="tip-description">Mantén horarios regulares para dormir y despertar, incluso los fines de semana.</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="tip-title">Apaga Dispositivos</div>
                            <div class="tip-description">Evita pantallas al menos 1 hora antes de dormir para mejorar la calidad del sueño.</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-temperature-low"></i>
                            </div>
                            <div class="tip-title">Temperatura Ideal</div>
                            <div class="tip-description">Mantén tu dormitorio entre 18-20°C para un descanso óptimo.</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-wind"></i>
                            </div>
                            <div class="tip-title">Ambiente Relajante</div>
                            <div class="tip-description">Crea un espacio oscuro, silencioso y bien ventilado para dormir.</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-utensils"></i>
                            </div>
                            <div class="tip-title">Cena Ligera</div>
                            <div class="tip-description">Evita comidas pesadas y cafeína al menos 3 horas antes de dormir.</div>
                        </div>
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-spa"></i>
                            </div>
                            <div class="tip-title">Rutina Relajante</div>
                            <div class="tip-description">Establece una rutina pre-sueño con actividades calmantes como lectura o meditación.</div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 style="margin-bottom: 25px; color: var(--text);">Recomendaciones Personalizadas</h3>
                    <div class="sleep-day" style="background: rgba(0,212,170,0.1); border-color: var(--primary);">
                        <div class="day-info">
                            <h4>Basado en tus patrones de sueño</h4>
                            <p>Intenta acostarte 30 minutos antes para alcanzar tu meta de 8 horas. Tu calidad de sueño mejoraría significativamente.</p>
                        </div>
                        <div style="color: var(--primary); font-size: 1.5rem;">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        (function () {
            'use strict';

            const $ = sel => document.querySelector(sel);
            const $$ = sel => document.querySelectorAll(sel);

            function toast(msg, time = 4000) {
                const t = document.createElement('div');
                t.className = 'toast';
                t.textContent = msg;
                $('#toasts').appendChild(t);
                setTimeout(() => t.remove(), time);
            }

            // Carga inicial
            document.addEventListener('DOMContentLoaded', () => {
                const savedName = localStorage.getItem('userName') || 'María González';
                const savedEmail = localStorage.getItem('userEmail') || 'maria.gonzalez@email.com';

                $('#userName').textContent = savedName;
                $('#headerEmail').textContent = savedEmail;

                setupTabs();
                setupChartActions();
                setupSleepForm();
                setupSleepGoal();
                setupFactors();
            });

            function setupTabs() {
                $$('.tab-btn').forEach(btn => {
                    btn.onclick = () => {
                        $$('.tab-btn').forEach(b => b.classList.remove('active'));
                        $$('.tab-content').forEach(c => c.classList.remove('active'));
                        btn.classList.add('active');
                        const tab = document.getElementById(btn.dataset.tab + '-tab');
                        if (tab) tab.classList.add('active');
                    };
                });
            }

            function setupChartActions() {
                $$('.chart-action').forEach(action => {
                    action.onclick = function() {
                        $$('.chart-action').forEach(a => a.classList.remove('active'));
                        this.classList.add('active');
                        toast('Período de tiempo actualizado');
                    };
                });
            }

            function setupSleepForm() {
                $('#sleepForm').onsubmit = e => {
                    e.preventDefault();

                    const date = $('#sleepDate').value;
                    const sleepTime = $('#sleepTime').value;
                    const wakeTime = $('#wakeTime').value;
                    const quality = $('#sleepQuality').value;
                    const notes = $('#sleepNotes').value;

                    // Guardar en localStorage
                    const sleepData = {
                        date,
                        sleepTime,
                        wakeTime,
                        quality,
                        notes,
                        timestamp: new Date().toISOString()
                    };

                    let sleepHistory = JSON.parse(localStorage.getItem('sleepHistory') || '[]');
                    sleepHistory.push(sleepData);
                    localStorage.setItem('sleepHistory', JSON.stringify(sleepHistory));

                    // Limpiar formulario
                    $('#sleepForm').reset();

                    toast('Registro de sueño guardado correctamente');
                };

                // Establecer fecha actual por defecto
                const today = new Date().toISOString().split('T')[0];
                $('#sleepDate').value = today;
            }

            function setupSleepGoal() {
                $('#saveSleepGoal').onclick = () => {
                    const goal = $('#sleepGoal').value;
                    localStorage.setItem('sleepGoal', goal);
                    toast('Meta de sueño actualizada a ' + goal + ' horas');
                };

                // Cargar meta guardada
                const savedGoal = localStorage.getItem('sleepGoal');
                if (savedGoal) {
                    $('#sleepGoal').value = savedGoal;
                }
            }

            function setupFactors() {
                $('#saveFactors').onclick = () => {
                    const factors = {
                        caffeine: $('#caffeine').value,
                        exercise: $('#exercise').value,
                        stress: $('#stress').value,
                        screenTime: $('#screenTime').value
                    };

                    localStorage.setItem('sleepFactors', JSON.stringify(factors));
                    toast('Factores de sueño guardados correctamente');
                };

                // Cargar factores guardados
                const savedFactors = JSON.parse(localStorage.getItem('sleepFactors') || '{}');
                if (savedFactors.caffeine) $('#caffeine').value = savedFactors.caffeine;
                if (savedFactors.exercise) $('#exercise').value = savedFactors.exercise;
                if (savedFactors.stress) $('#stress').value = savedFactors.stress;
                if (savedFactors.screenTime) $('#screenTime').value = savedFactors.screenTime;
            }

            // Sincronizar
            $('#btnSync').onclick = function() {
                const txt = this.innerHTML;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sincronizando...';
                this.disabled = true;
                setTimeout(() => {
                    this.innerHTML = txt;
                    this.disabled = false;
                    toast('Datos de sueño sincronizados correctamente');
                }, 1800);
            };

            // Logout
            $('#btnLogout').onclick = () => {
                if (confirm('¿Cerrar sesión?')) {
                    toast('Sesión cerrada');
                    setTimeout(() => location.href = 'index.html', 1000);
                }
            };

        })();
    </script>
</body>
</html>